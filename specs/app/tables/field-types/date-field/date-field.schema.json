{
  "$id": "date-field.schema.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Date Field",
  "type": "object",
  "properties": {
    "id": {
      "$ref": "../../../common/definitions.schema.json#/definitions/id"
    },
    "name": {
      "$ref": "../../../common/definitions.schema.json#/definitions/name"
    },
    "required": {
      "$ref": "../common/required/required.schema.json"
    },
    "unique": {
      "$ref": "../common/unique/unique.schema.json"
    },
    "indexed": {
      "$ref": "../common/indexed/indexed.schema.json"
    },
    "type": {
      "type": "string",
      "const": "date",
      "description": "Field type discriminator for date-only fields",
      "examples": ["date"]
    },
    "format": {
      "$ref": "./format/format.schema.json"
    },
    "default": {
      "$ref": "./default/default.schema.json"
    }
  },
  "description": "Date field for calendar dates only (no time component). Stores values in ISO 8601 date format (YYYY-MM-DD). Supports custom display formats (YYYY-MM-DD, MM/DD/YYYY, DD-MM-YYYY) and optional default values. Useful for tracking birthdays, deadlines, project milestones, and any date-based data without time precision.",
  "examples": [
    {
      "id": "fld_001",
      "name": "birth_date",
      "type": "date",
      "required": true,
      "format": "YYYY-MM-DD"
    },
    {
      "id": "fld_002",
      "name": "project_deadline",
      "type": "date",
      "required": false,
      "indexed": true,
      "format": "MM/DD/YYYY"
    }
  ],
  "required": ["id", "name", "type"],
  "additionalProperties": false,
  "specs": [
    {
      "id": "APP-FIELD-DATE-001",
      "title": "Create record with valid date field",
      "given": "a table with a date field",
      "when": "user creates a record with a valid date value (YYYY-MM-DD)",
      "then": "the record is created successfully with the date stored in ISO 8601 format"
    },
    {
      "id": "APP-FIELD-DATE-002",
      "title": "Reject invalid date format",
      "given": "a table with a date field",
      "when": "user provides a date in invalid format (e.g., '12-31-2024' instead of '2024-12-31')",
      "then": "validation error is returned with message 'Date must be in YYYY-MM-DD format'"
    },
    {
      "id": "APP-FIELD-DATE-003",
      "title": "Display date in custom format",
      "given": "a date field with format 'MM/DD/YYYY'",
      "when": "user views a record with date '2024-12-31'",
      "then": "the date is displayed as '12/31/2024'"
    },
    {
      "id": "APP-FIELD-DATE-004",
      "title": "Apply default value on record creation",
      "given": "a date field with default value 'today'",
      "when": "user creates a record without providing a date value",
      "then": "the field is populated with today's date in ISO 8601 format"
    },
    {
      "id": "APP-FIELD-DATE-005",
      "title": "Enforce required validation",
      "given": "a required date field",
      "when": "user attempts to create a record without providing a date value",
      "then": "validation error is returned with message 'Date is required'"
    },
    {
      "id": "APP-FIELD-DATE-006",
      "title": "Reject invalid calendar dates",
      "given": "a table with a date field",
      "when": "user provides an invalid date like '2024-02-30'",
      "then": "validation error is returned with message 'Invalid date: February 30th does not exist'"
    }
  ]
}
