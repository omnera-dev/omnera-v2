{
  "$id": "multiple-attachments-field.schema.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Multiple Attachments Field",
  "type": "object",
  "properties": {
    "id": {
      "$ref": "../../common/definitions.schema.json#/definitions/id"
    },
    "name": {
      "$ref": "../../common/definitions.schema.json#/definitions/name"
    },
    "required": {
      "$ref": "../common/required/required.schema.json"
    },
    "indexed": {
      "$ref": "../common/indexed/indexed.schema.json"
    },
    "type": {
      "type": "string",
      "const": "multiple-attachments"
    },
    "maxFiles": {
      "$ref": "./maxFiles/maxFiles.schema.json"
    },
    "storage": {
      "$ref": "./storage/storage.schema.json"
    }
  },
  "description": "Multiple file upload field for collections of attachments. Supports local or S3 storage like single-attachment but allows multiple files per record. Configure maxFiles limit (default 10), maxSize per file (default 10MB), and allowedTypes using MIME types. Useful for document collections, image galleries, contract attachments, and multi-file uploads. Each file validated independently against constraints.",
  "required": ["id", "name", "type"],
  "additionalProperties": false,
  "specs": [
    {
      "id": "SPEC-001",
      "given": "entity with type='multiple-attachments'",
      "when": "processing configuration",
      "then": "correct handler should be selected"
    },
    {
      "id": "SPEC-002",
      "given": "invalid type value",
      "when": "validating configuration",
      "then": "clear error message should identify the issue"
    }
  ]
}
