{
  "$id": "phone-number-field.schema.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Phone Number Field",
  "type": "object",
  "properties": {
    "id": {
      "$ref": "../../../common/definitions.schema.json#/definitions/id"
    },
    "name": {
      "$ref": "../../../common/definitions.schema.json#/definitions/name"
    },
    "required": {
      "$ref": "../common/required/required.schema.json"
    },
    "unique": {
      "$ref": "../common/unique/unique.schema.json"
    },
    "indexed": {
      "$ref": "../common/indexed/indexed.schema.json"
    },
    "type": {
      "const": "phone-number"
    },
    "default": {
      "$ref": "./default/default.schema.json"
    }
  },
  "description": "Text field optimized for phone numbers with automatic formatting based on detected country code. Stores the raw phone number value without validation to support international formats. Display formatting helps readability but doesn't enforce strict patterns. Required flag makes the field mandatory. Unique constraint ensures no duplicate phone numbers.",
  "required": ["id", "name", "type"],
  "additionalProperties": false,
  "x-specs": [
    {
      "id": "APP-FIELD-PHONE-NUMBER-001",
      "given": "I create a phone number field",
      "when": "I enter a phone number",
      "then": "it should format it automatically for display"
    },
    {
      "id": "APP-FIELD-PHONE-NUMBER-002",
      "given": "I create a phone number field",
      "when": "I enter an international number",
      "then": "it should accept it without validation errors"
    },
    {
      "id": "APP-FIELD-PHONE-NUMBER-003",
      "given": "I create a phone number field with unique constraint",
      "when": "I enter a duplicate number",
      "then": "it should reject the input"
    },
    {
      "id": "APP-PHONE-NUMBER-FIELD-004",
      "given": "a Phone Number Field is configured",
      "when": "validating schema",
      "then": "type must be 'phone-number'"
    },
    {
      "id": "APP-PHONE-NUMBER-FIELD-005",
      "given": "type is set to 'phone-number'",
      "when": "processing field",
      "then": "it should be treated as a Phone Number Field"
    }
  ]
}
