{
  "$id": "default.schema.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Default DateTime Value",
  "description": "Default value for datetime field when no value is provided. Can be an ISO 8601 datetime string (YYYY-MM-DDTHH:mm:ss.sssZ) or a special keyword like 'now'. Applied automatically when creating new records. Useful for timestamps like created_at, updated_at.",
  "type": "string",
  "examples": ["2024-12-31T15:00:00.000Z", "now", "2025-01-01T00:00:00.000Z"],
  "specs": [
    {
      "id": "APP-FIELD-DATETIME-DEFAULT-001",
      "title": "Apply static default datetime",
      "given": "a datetime field with default value '2025-01-01T00:00:00.000Z'",
      "when": "user creates a record without providing a datetime value",
      "then": "the field is populated with '2025-01-01T00:00:00.000Z'"
    },
    {
      "id": "APP-FIELD-DATETIME-DEFAULT-002",
      "title": "Apply dynamic 'now' default",
      "given": "a datetime field with default value 'now'",
      "when": "user creates a record at 2024-12-31T15:30:45.123Z without providing a datetime value",
      "then": "the field is populated with the current UTC timestamp"
    },
    {
      "id": "APP-FIELD-DATETIME-DEFAULT-003",
      "title": "User value overrides default",
      "given": "a datetime field with default value 'now'",
      "when": "user creates a record and provides datetime value '2025-06-15T10:00:00.000Z'",
      "then": "the field is populated with user-provided value (default ignored)"
    },
    {
      "id": "APP-FIELD-DATETIME-DEFAULT-004",
      "title": "Reject invalid default datetime format",
      "given": "a datetime field configuration",
      "when": "user sets default to '2024-12-31 15:00:00' (invalid format)",
      "then": "validation error is returned with message 'Default must be ISO 8601 datetime or keyword (now)'"
    }
  ]
}
