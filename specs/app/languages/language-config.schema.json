{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "language-config.schema.json",
  "title": "Language Configuration",
  "description": "Configuration for a single supported language",
  "type": "object",
  "properties": {
    "code": {
      "type": "string",
      "pattern": "^[a-z]{2}(-[A-Z]{2})?$",
      "description": "Language code (ISO 639-1 with optional country)",
      "examples": ["en-US", "fr-FR", "es-ES", "ar-SA"]
    },
    "label": {
      "type": "string",
      "description": "Human-readable language name",
      "examples": ["English", "FranÃ§ais", "EspaÃ±ol", "Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"]
    },
    "direction": {
      "type": "string",
      "enum": ["ltr", "rtl"],
      "default": "ltr",
      "description": "Text direction (left-to-right or right-to-left)"
    },
    "flag": {
      "type": "string",
      "description": "Flag emoji or icon path",
      "examples": ["ðŸ‡ºðŸ‡¸", "ðŸ‡«ðŸ‡·", "ðŸ‡ªðŸ‡¸", "/flags/us.svg"]
    }
  },
  "required": ["code", "label"],
  "additionalProperties": false,
  "examples": [
    {
      "code": "en-US",
      "label": "English",
      "direction": "ltr",
      "flag": "ðŸ‡ºðŸ‡¸"
    },
    {
      "code": "ar-SA",
      "label": "Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
      "direction": "rtl",
      "flag": "ðŸ‡¸ðŸ‡¦"
    }
  ],
  "x-specs": [
    {
      "id": "APP-LANG-CONFIG-001",
      "given": "a language config for English (en-US)",
      "when": "language is defined with code and label",
      "then": "it should be valid with LTR direction by default",
      "validation": {
        "setup": {
          "language": {
            "code": "en-US",
            "label": "English"
          }
        },
        "assertions": [
          "Code: 'en-US' (ISO 639-1 format with country)",
          "Label: 'English' (human-readable)",
          "Direction: defaults to 'ltr' (left-to-right)"
        ]
      }
    },
    {
      "id": "APP-LANG-CONFIG-002",
      "given": "a language config for Arabic (ar-SA) with rtl direction",
      "when": "language is defined with RTL direction",
      "then": "it should support right-to-left text rendering",
      "validation": {
        "setup": {
          "language": {
            "code": "ar-SA",
            "label": "Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
            "direction": "rtl"
          }
        },
        "assertions": [
          "Code: 'ar-SA' (Arabic - Saudi Arabia)",
          "Label: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©' (native Arabic script)",
          "Direction: 'rtl' (right-to-left text flow)"
        ]
      },
      "application": {
        "language": {
          "code": "ar-SA",
          "label": "Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
          "direction": "rtl"
        },
        "component": "html",
        "expectedDOM": "<html lang=\"ar-SA\" dir=\"rtl\"><body>...</body></html>",
        "assertions": [
          "HTML dir attribute: dir=\"rtl\" flips entire layout",
          "Text flows right-to-left",
          "UI elements (menus, buttons) mirror horizontally",
          "Arabic text renders correctly with native font support"
        ]
      }
    },
    {
      "id": "APP-LANG-CONFIG-003",
      "given": "a language config with 2-letter code (en)",
      "when": "language code uses ISO 639-1 format without country",
      "then": "it should be valid",
      "validation": {
        "setup": {
          "language": {
            "code": "en",
            "label": "English"
          }
        },
        "assertions": [
          "Code: 'en' (ISO 639-1 language-only format)",
          "Pattern: ^[a-z]{2}$ (2 lowercase letters)",
          "Valid without country code (-US, -GB, etc.)"
        ]
      }
    },
    {
      "id": "APP-LANG-CONFIG-004",
      "given": "a language config with 4-letter code (en-US)",
      "when": "language code includes country code",
      "then": "it should be valid with country-specific format",
      "validation": {
        "setup": {
          "language": {
            "code": "en-US",
            "label": "English (US)"
          }
        },
        "assertions": [
          "Code: 'en-US' (language + country)",
          "Pattern: ^[a-z]{2}-[A-Z]{2}$ (lowercase-UPPERCASE)",
          "Allows country-specific variants (en-US vs en-GB)"
        ]
      },
      "application": {
        "language": {
          "code": "en-US",
          "label": "English (US)"
        },
        "component": "html",
        "expectedDOM": "<html lang=\"en-US\"><body>...</body></html>",
        "assertions": [
          "HTML lang attribute: lang=\"en-US\"",
          "Enables locale-specific features (date formats, number formats)",
          "Helps screen readers use correct pronunciation",
          "SEO: Search engines recognize regional content"
        ]
      }
    },
    {
      "id": "APP-LANG-CONFIG-005",
      "given": "a language config with flag emoji (ðŸ‡«ðŸ‡·)",
      "when": "flag is provided as unicode emoji",
      "then": "it should display the flag in language switcher",
      "validation": {
        "setup": {
          "language": {
            "code": "fr-FR",
            "label": "FranÃ§ais",
            "flag": "ðŸ‡«ðŸ‡·"
          }
        },
        "assertions": [
          "Flag: 'ðŸ‡«ðŸ‡·' (Unicode emoji)",
          "Cross-platform emoji support",
          "No external images needed"
        ]
      },
      "application": {
        "language": {
          "code": "fr-FR",
          "label": "FranÃ§ais",
          "flag": "ðŸ‡«ðŸ‡·"
        },
        "component": "language-switcher",
        "expectedDOM": "<button data-testid=\"language-option-fr-FR\"><span class=\"flag\">ðŸ‡«ðŸ‡·</span><span class=\"label\">FranÃ§ais</span></button>",
        "assertions": [
          "Flag emoji renders in language switcher",
          "Visual identification of language",
          "No image loading required (instant display)"
        ]
      }
    },
    {
      "id": "APP-LANG-CONFIG-006",
      "given": "a language config with flag icon path (/flags/es.svg)",
      "when": "flag is provided as file path",
      "then": "it should load the flag image from the path",
      "validation": {
        "setup": {
          "language": {
            "code": "es-ES",
            "label": "EspaÃ±ol",
            "flag": "/flags/es.svg"
          }
        },
        "assertions": [
          "Flag: '/flags/es.svg' (file path)",
          "Custom flag images supported",
          "Alternative to emoji for consistent design"
        ]
      },
      "application": {
        "language": {
          "code": "es-ES",
          "label": "EspaÃ±ol",
          "flag": "/flags/es.svg"
        },
        "component": "language-switcher",
        "expectedDOM": "<button data-testid=\"language-option-es-ES\"><img src=\"/flags/es.svg\" alt=\"Spain flag\" class=\"flag\" /><span class=\"label\">EspaÃ±ol</span></button>",
        "assertions": [
          "Flag image loads from path: src=\"/flags/es.svg\"",
          "Custom SVG flags for consistent styling",
          "Alt text for accessibility"
        ]
      }
    },
    {
      "id": "APP-LANG-CONFIG-007",
      "given": "a language config with native language label (FranÃ§ais, EspaÃ±ol, Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)",
      "when": "label uses the language's native name",
      "then": "it should display correctly in all character sets",
      "validation": {
        "setup": {
          "languages": [
            {
              "code": "fr-FR",
              "label": "FranÃ§ais"
            },
            {
              "code": "es-ES",
              "label": "EspaÃ±ol"
            },
            {
              "code": "ar-SA",
              "label": "Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"
            }
          ]
        },
        "assertions": [
          "Latin script: 'FranÃ§ais', 'EspaÃ±ol' (with accents)",
          "Arabic script: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©' (right-to-left)",
          "UTF-8 support for all character sets",
          "Native names improve UX for non-English speakers"
        ]
      },
      "application": {
        "languages": [
          {
            "code": "fr-FR",
            "label": "FranÃ§ais"
          },
          {
            "code": "ar-SA",
            "label": "Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"
          }
        ],
        "component": "language-switcher",
        "expectedDOM": "<div data-testid=\"language-switcher\"><button data-testid=\"language-option-fr-FR\">FranÃ§ais</button><button data-testid=\"language-option-ar-SA\">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</button></div>",
        "assertions": [
          "French accents render correctly: 'FranÃ§ais'",
          "Arabic script renders correctly: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©'",
          "UTF-8 encoding ensures all characters display",
          "Users recognize their language immediately"
        ]
      }
    },
    {
      "id": "APP-LANG-CONFIG-008",
      "given": "a minimal language config with only code and label",
      "when": "direction and flag are omitted",
      "then": "it should use default LTR direction and no flag",
      "validation": {
        "setup": {
          "language": {
            "code": "de-DE",
            "label": "Deutsch"
          }
        },
        "assertions": [
          "Code and label: required properties",
          "Direction: defaults to 'ltr' when omitted",
          "Flag: optional (omitted)",
          "Minimal valid configuration"
        ]
      },
      "application": {
        "language": {
          "code": "de-DE",
          "label": "Deutsch"
        },
        "component": "language-switcher",
        "expectedDOM": "<html lang=\"de-DE\" dir=\"ltr\"><body><button data-testid=\"language-option-de-DE\">Deutsch</button></body></html>",
        "assertions": [
          "HTML: lang=\"de-DE\" dir=\"ltr\"",
          "Direction defaults to LTR",
          "No flag displayed when omitted",
          "Minimal configuration works correctly"
        ]
      }
    }
  ]
}
