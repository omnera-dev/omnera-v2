# Connection ID - Business Rules

## Overview

Unique numeric identifier for the connection instance. This ID references the common `id` definition shared across all entities in the system.

## Validation Rules

- **Type**: Positive integer
- **Range**: 1 to 9007199254740991 (JavaScript MAX_SAFE_INTEGER)
- **Uniqueness**: Must be unique within the connections collection
- **Required**: Yes

### Examples

```json
{
  "id": 1
}
```

```json
{
  "id": 42
}
```

## Runtime Behavior

- **Assignment**: Auto-generated by database on creation (sequential or UUID-based)
- **Immutability**: Cannot be modified after creation (read-only)
- **References**: Used in automation configurations, API endpoints, and foreign keys

## Error Scenarios

### Invalid ID Format

**Scenario**: Client provides non-integer or negative value

```json
{
  "id": "abc" // ❌ Invalid
}
```

**Result**: Validation error - "ID must be a positive integer"

### ID Collision

**Scenario**: Attempting to create connection with existing ID

```json
{
  "id": 1 // Already exists
}
```

**Result**: Database constraint error - "Connection ID must be unique"

### ID Modification

**Scenario**: Attempting to update existing connection's ID

```json
PATCH /connections/1
{
  "id": 999  // ❌ Not allowed
}
```

**Result**: Validation error - "ID is immutable and cannot be changed"

## Security Considerations

- **Enumeration**: IDs are sequential and expose total connection count (consider UUIDs for sensitive deployments)
- **Authorization**: Always verify user has access to connection before returning by ID
- **Deletion**: Soft-delete recommended to preserve referential integrity in automation logs
