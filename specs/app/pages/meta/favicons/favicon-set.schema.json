{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "favicon-set.schema.json",
  "title": "Favicon Set",
  "description": "Multiple favicon sizes and types for different devices",
  "type": "array",
  "items": {
    "type": "object",
    "properties": {
      "rel": {
        "type": "string",
        "enum": ["icon", "apple-touch-icon", "manifest", "mask-icon"],
        "description": "Relationship type"
      },
      "type": {
        "type": "string",
        "pattern": "^image/",
        "description": "MIME type",
        "examples": ["image/png", "image/x-icon", "image/svg+xml"]
      },
      "sizes": {
        "type": "string",
        "pattern": "^[0-9]+x[0-9]+$",
        "description": "Icon dimensions",
        "examples": ["16x16", "32x32", "180x180", "192x192"]
      },
      "href": {
        "type": "string",
        "pattern": "^\\./",
        "description": "Path to the favicon file"
      },
      "color": {
        "type": "string",
        "pattern": "^#[0-9A-Fa-f]{6}$",
        "description": "Color for mask-icon (Safari pinned tab)"
      }
    },
    "required": ["rel", "href"],
    "additionalProperties": false
  },
  "examples": [
    [
      {
        "rel": "apple-touch-icon",
        "sizes": "180x180",
        "href": "./public/favicon/apple-touch-icon.png"
      },
      {
        "rel": "icon",
        "type": "image/png",
        "sizes": "32x32",
        "href": "./public/favicon/favicon-32x32.png"
      },
      {
        "rel": "manifest",
        "href": "./public/favicon/site.webmanifest"
      }
    ]
  ],
  "x-specs": [
    {
      "id": "APP-PAGES-FAVICONSET-001",
      "given": "a favicon with rel 'icon'",
      "when": "rel is 'icon' for standard favicon",
      "then": "it should define browser icon",
      "application": {
        "favicon": {
          "rel": "icon",
          "type": "image/png",
          "sizes": "32x32",
          "href": "./favicon-32x32.png"
        },
        "expectedHTML": "<link rel=\"icon\" type=\"image/png\" sizes=\"32x32\" href=\"/favicon-32x32.png\" />",
        "assertions": ["rel: 'icon' (standard)", "Common sizes: 16x16, 32x32", "Browser tab icon"]
      }
    },
    {
      "id": "APP-PAGES-FAVICONSET-002",
      "given": "a favicon with rel 'apple-touch-icon'",
      "when": "rel is 'apple-touch-icon' for iOS devices",
      "then": "it should define Apple touch icon",
      "application": {
        "favicon": {
          "rel": "apple-touch-icon",
          "sizes": "180x180",
          "href": "./apple-touch-icon.png"
        },
        "expectedHTML": "<link rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"/apple-touch-icon.png\" />",
        "usage": "iOS home screen icon (when user adds site to home screen)",
        "assertions": [
          "rel: 'apple-touch-icon' (iOS)",
          "Size: 180x180 (iPhone)",
          "No type attribute needed (defaults to PNG)"
        ]
      }
    },
    {
      "id": "APP-PAGES-FAVICONSET-003",
      "given": "a favicon with rel 'mask-icon'",
      "when": "rel is 'mask-icon' for Safari pinned tabs",
      "then": "it should define Safari mask icon with color",
      "application": {
        "favicon": { "rel": "mask-icon", "href": "./safari-pinned-tab.svg", "color": "#5BBAD5" },
        "expectedHTML": "<link rel=\"mask-icon\" href=\"/safari-pinned-tab.svg\" color=\"#5BBAD5\" />",
        "usage": "Safari pinned tabs (SVG monochrome icon with theme color)",
        "assertions": [
          "rel: 'mask-icon' (Safari)",
          "SVG format required",
          "color: Brand color (hex)"
        ]
      }
    },
    {
      "id": "APP-PAGES-FAVICONSET-004",
      "given": "a favicon with sizes attribute",
      "when": "sizes is '16x16', '32x32', '180x180', or '192x192'",
      "then": "it should specify icon dimensions for different contexts",
      "application": {
        "sizes": {
          "16x16": "Browser tabs (standard)",
          "32x32": "Browser tabs (Retina)",
          "180x180": "iOS home screen",
          "192x192": "Android home screen",
          "512x512": "PWA splash screen"
        },
        "assertions": [
          "sizes: Pattern ^[0-9]+x[0-9]+$",
          "Different contexts need different sizes",
          "Browser picks best match"
        ]
      }
    },
    {
      "id": "APP-PAGES-FAVICONSET-005",
      "given": "a favicon with type attribute",
      "when": "type is 'image/png', 'image/x-icon', or 'image/svg+xml'",
      "then": "it should specify MIME type",
      "application": {
        "types": [
          { "type": "image/png", "description": "PNG format (most common)" },
          { "type": "image/x-icon", "description": "ICO format (legacy)" },
          { "type": "image/svg+xml", "description": "SVG format (scalable)" }
        ],
        "pattern": "^image/",
        "assertions": [
          "type: MIME type starting with 'image/'",
          "Helps browser render correctly",
          "Optional for apple-touch-icon"
        ]
      }
    },
    {
      "id": "APP-PAGES-FAVICONSET-006",
      "given": "a favicon with color for mask-icon",
      "when": "color is hex value like '#FF5733'",
      "then": "it should define Safari pinned tab color",
      "application": {
        "favicon": { "rel": "mask-icon", "href": "./safari-pinned-tab.svg", "color": "#FF5733" },
        "usage": "Safari pinned tabs use this color for the monochrome SVG",
        "pattern": "^#[0-9A-Fa-f]{6}$",
        "assertions": ["color: 6-digit hex", "Only for mask-icon", "Brand color (matches logo)"]
      }
    },
    {
      "id": "APP-PAGES-FAVICONSET-007",
      "given": "a complete favicon set",
      "when": "array contains icons for all devices (16x16, 32x32, 180x180, 192x192, 512x512, manifest)",
      "then": "it should provide comprehensive multi-device icon support",
      "application": {
        "favicons": [
          { "rel": "icon", "type": "image/png", "sizes": "16x16", "href": "./favicon-16x16.png" },
          { "rel": "icon", "type": "image/png", "sizes": "32x32", "href": "./favicon-32x32.png" },
          { "rel": "apple-touch-icon", "sizes": "180x180", "href": "./apple-touch-icon.png" },
          {
            "rel": "icon",
            "type": "image/png",
            "sizes": "192x192",
            "href": "./android-chrome-192x192.png"
          },
          {
            "rel": "icon",
            "type": "image/png",
            "sizes": "512x512",
            "href": "./android-chrome-512x512.png"
          },
          { "rel": "mask-icon", "href": "./safari-pinned-tab.svg", "color": "#5BBAD5" },
          { "rel": "manifest", "href": "./site.webmanifest" }
        ],
        "coverage": {
          "desktop": "16x16, 32x32",
          "iOS": "180x180 (apple-touch-icon)",
          "Android": "192x192, 512x512",
          "Safari": "mask-icon + color",
          "PWA": "manifest"
        },
        "assertions": [
          "Complete set: All major platforms",
          "7 items covering desktop + mobile",
          "Best practice for production sites"
        ]
      }
    },
    {
      "id": "APP-PAGES-META-FAVICONS-FAVICON-SET-REGRESSION-001",
      "given": "complete application configuration with all features",
      "when": "user completes full workflow",
      "then": "user can complete full favicon set workflow"
    }
  ]
}
