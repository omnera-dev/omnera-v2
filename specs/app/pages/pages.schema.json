{
  "$id": "pages.schema.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Pages",
  "description": "Marketing and content pages with server-side rendering support. Pages use a block-based layout system with reusable components for building landing pages, about pages, pricing pages, and other public-facing content. Supports comprehensive metadata, theming, and structured data for SEO optimization.",
  "type": "array",
  "minItems": 1,
  "default": [],
  "items": {
    "title": "Page",
    "description": "A complete page configuration with metadata, theme, blocks, layout, and content sections",
    "type": "object",
    "properties": {
      "id": {
        "$ref": "./id/id.schema.json"
      },
      "name": {
        "$ref": "./name/name.schema.json"
      },
      "path": {
        "$ref": "./path/path.schema.json"
      },
      "meta": {
        "$ref": "./meta/meta.schema.json"
      },
      "layout": {
        "$ref": "./layout/layout.schema.json"
      },
      "sections": {
        "$ref": "./sections/sections.schema.json"
      },
      "scripts": {
        "$ref": "./scripts/scripts.schema.json"
      }
    },
    "required": ["name", "path", "meta", "sections"],
    "additionalProperties": false,
    "examples": [
      {
        "name": "Home Page",
        "path": "/",
        "meta": {
          "lang": "en-US",
          "title": "Welcome to Our Platform",
          "description": "The best platform for your needs"
        },
        "layout": {
          "navigation": {
            "logo": "./logo.svg",
            "links": {
              "desktop": [
                { "label": "Home", "href": "/" },
                { "label": "About", "href": "/about" }
              ]
            }
          }
        },
        "sections": [
          {
            "type": "section",
            "props": { "id": "hero" },
            "children": []
          }
        ]
      }
    ]
  },
  "specs": [
    {
      "id": "APP-PAGES-001",
      "given": "a pages array with single page",
      "when": "array contains one complete page configuration",
      "then": "it should validate as pages array with minimum 1 item"
    },
    {
      "id": "APP-PAGES-002",
      "given": "a page with required properties only",
      "when": "page has name, path, meta, and sections",
      "then": "it should validate with minimal configuration"
    },
    {
      "id": "APP-PAGES-003",
      "given": "a page with all optional properties",
      "when": "page includes id, layout, and scripts",
      "then": "it should accept complete page configuration"
    },
    {
      "id": "APP-PAGES-004",
      "given": "a page with home path",
      "when": "path is '/'",
      "then": "it should accept root path for homepage"
    },
    {
      "id": "APP-PAGES-005",
      "given": "a page with nested path",
      "when": "path is '/products/pricing'",
      "then": "it should accept nested URL paths"
    },
    {
      "id": "APP-PAGES-006",
      "given": "a page with sections containing direct components",
      "when": "sections has type, props, and children",
      "then": "it should support direct component definitions in sections"
    },
    {
      "id": "APP-PAGES-007",
      "given": "a page with sections containing block references",
      "when": "sections references blocks with variable substitution",
      "then": "it should support block references with $variable syntax"
    },
    {
      "id": "APP-PAGES-008",
      "given": "a page with layout configuration",
      "when": "layout includes navigation, banner, footer, and sidebar",
      "then": "it should orchestrate global layout components"
    },
    {
      "id": "APP-PAGES-009",
      "given": "a page with scripts configuration",
      "when": "scripts includes features, external scripts, and config",
      "then": "it should manage client-side scripts and features"
    },
    {
      "id": "APP-PAGES-010",
      "given": "multiple pages in array",
      "when": "pages array contains [homepage, about, pricing, contact]",
      "then": "it should support multiple page configurations"
    },
    {
      "id": "APP-PAGES-011",
      "given": "a page supporting reusable blocks",
      "when": "blocks are defined at app level and referenced in sections",
      "then": "it should enable block reusability across pages via $ref"
    },
    {
      "id": "APP-PAGES-012",
      "given": "a page with comprehensive metadata",
      "when": "meta includes SEO, social, structured data, and analytics",
      "then": "it should support complete metadata configuration beyond basic SEO"
    }
  ],
  "x-notes": [
    "Pages now support comprehensive metadata beyond basic SEO",
    "⚠️ Theme is defined at app level (app.theme{}) - NOT in individual pages. See app.schema.json and theme.schema.json",
    "⚠️ Blocks are defined at app level (app.blocks[]) - NOT in individual pages. See app.schema.json and blocks.schema.json",
    "Sections can reference blocks using $ref syntax with variable substitution. See sections.schema.json and block-reference.schema.json",
    "Pages cannot override theme - app.theme{} applies globally to all pages",
    "For page-specific styling, use sections[].props.className with Tailwind utilities"
  ]
}
