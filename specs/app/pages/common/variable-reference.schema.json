{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "variable-reference.schema.json",
  "title": "Variable Reference",
  "description": "Pattern for referencing variables in bloc templates using $variableName syntax",
  "type": "string",
  "pattern": "^.*\\$[a-zA-Z][a-zA-Z0-9]*.*$",
  "examples": [
    "$color",
    "$primaryText",
    "Welcome to $siteName",
    "The $productName costs $price",
    "$icon-$size"
  ],
  "x-notes": [
    "Variables are replaced at runtime with values from the 'vars' object",
    "Variable names must start with a letter and contain only alphanumeric characters",
    "Multiple variables can appear in the same string"
  ],
  "x-specs": [
    {
      "id": "APP-PAGES-VARREF-001",
      "given": "a simple variable reference",
      "when": "value is '$color'",
      "then": "it should validate variable syntax",
      "application": {
        "template": "$color",
        "vars": { "color": "blue" },
        "result": "blue",
        "assertions": ["Simple variable: $color → blue", "Runtime substitution"]
      }
    },
    {
      "id": "APP-PAGES-VARREF-002",
      "given": "a variable reference with camelCase name",
      "when": "value is '$primaryText'",
      "then": "it should accept camelCase variable names",
      "application": {
        "template": "$primaryText",
        "vars": { "primaryText": "Hello World" },
        "result": "Hello World",
        "assertions": ["camelCase: $primaryText → Hello World"]
      }
    },
    {
      "id": "APP-PAGES-VARREF-003",
      "given": "a string with variable at the start",
      "when": "value is '$siteName is the best'",
      "then": "it should accept variable at start of string",
      "application": {
        "template": "$siteName is the best",
        "vars": { "siteName": "Sovrium" },
        "result": "Sovrium is the best",
        "assertions": ["Variable at start: '$siteName is...' → 'Sovrium is...'"]
      }
    },
    {
      "id": "APP-PAGES-VARREF-004",
      "given": "a string with variable in the middle",
      "when": "value is 'Welcome to $siteName today'",
      "then": "it should accept variable in middle of string",
      "application": {
        "template": "Welcome to $siteName today",
        "vars": { "siteName": "Sovrium" },
        "result": "Welcome to Sovrium today",
        "assertions": ["Variable in middle: 'Welcome to $siteName today'"]
      }
    },
    {
      "id": "APP-PAGES-VARREF-005",
      "given": "a string with variable at the end",
      "when": "value is 'The color is $primaryColor'",
      "then": "it should accept variable at end of string",
      "application": {
        "template": "The color is $primaryColor",
        "vars": { "primaryColor": "#007bff" },
        "result": "The color is #007bff",
        "assertions": ["Variable at end: 'The color is $primaryColor'"]
      }
    },
    {
      "id": "APP-PAGES-VARREF-006",
      "given": "a string with multiple variables",
      "when": "value is 'The $productName costs $price'",
      "then": "it should accept multiple $variable references",
      "application": {
        "template": "The $productName costs $price",
        "vars": { "productName": "Widget", "price": "$99" },
        "result": "The Widget costs $99",
        "assertions": ["Multiple variables: $productName + $price"]
      }
    },
    {
      "id": "APP-PAGES-VARREF-007",
      "given": "a variable reference with numbers in name",
      "when": "value is '$color1' or '$size2x'",
      "then": "it should accept alphanumeric variable names",
      "application": {
        "examples": [
          { "template": "$color1", "vars": { "color1": "red" }, "result": "red" },
          { "template": "$size2x", "vars": { "size2x": "large" }, "result": "large" }
        ],
        "assertions": ["Alphanumeric: $color1, $size2x valid"]
      }
    },
    {
      "id": "APP-PAGES-VARREF-008",
      "given": "complex variable combination",
      "when": "value is '$icon-$size' for dynamic icon sizing",
      "then": "it should support variable composition patterns",
      "application": {
        "template": "$icon-$size",
        "vars": { "icon": "check", "size": "lg" },
        "result": "check-lg",
        "assertions": ["Composition: $icon-$size → check-lg", "Dynamic class names"]
      }
    },
    {
      "id": "APP-PAGES-VARIABLE-REFERENCE-REGRESSION-001",
      "given": "complete application configuration with all features",
      "when": "user completes full workflow",
      "then": "user can complete full variable-reference workflow"
    }
  ]
}
