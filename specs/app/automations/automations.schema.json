{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Automations",
  "description": "Workflow automations that execute actions when triggered by specific events or conditions. Automations enable business logic such as sending emails when records are created, updating related data when values change, or integrating with external services via webhooks. Each automation consists of a trigger (when to run) and a sequence of actions (what to do).",
  "default": [],
  "type": "array",
  "items": {
    "type": "object",
    "properties": {
      "id": {
        "$ref": "./id/id.schema.json"
      },
      "name": {
        "$ref": "./name/name.schema.json"
      },
      "description": {
        "$ref": "./description/description.schema.json"
      },
      "trigger": {
        "$ref": "./trigger/trigger.schema.json"
      },
      "actions": {
        "description": "Sequence of actions to execute when triggered",
        "title": "Actions",
        "default": [],
        "type": "array",
        "items": {
          "$ref": "./actions/actions.schema.json"
        }
      }
    },
    "required": ["id", "name", "trigger", "actions"],
    "additionalProperties": false
  },
  "x-specs": [
    {
      "id": "APP-AUTOMATIONS-001",
      "given": "user provides automations array",
      "when": "validating input",
      "then": "items should be processed in order"
    },
    {
      "id": "APP-AUTOMATIONS-002",
      "given": "automations array is empty",
      "when": "validating input",
      "then": "behavior should follow optional/required rules"
    },
    {
      "id": "APP-AUTOMATIONS-003",
      "given": "the application is running",
      "when": "I list automations",
      "then": "it should work correctly"
    },
    {
      "id": "APP-AUTOMATIONS-004",
      "given": "the application is running",
      "when": "I disable an automation",
      "then": "it should work correctly"
    },
    {
      "id": "APP-AUTOMATIONS-005",
      "given": "the application is running",
      "when": "I enable an automation",
      "then": "it should work correctly"
    },
    {
      "id": "APP-AUTOMATIONS-006",
      "given": "the application is running",
      "when": "I open the edit url",
      "then": "it should work correctly"
    },
    {
      "id": "APP-AUTOMATIONS-007",
      "given": "the application is running",
      "when": "I return a list of automations",
      "then": "it should work correctly"
    },
    {
      "id": "APP-AUTOMATIONS-008",
      "given": "I am working with same integration actions in a queue",
      "when": "I run parallel automations",
      "then": "it should complete successfully"
    }
  ]
}
