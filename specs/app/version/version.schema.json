{
  "$id": "version.schema.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Application Version",
  "description": "The version of the application following Semantic Versioning (SemVer) 2.0.0 specification",
  "type": "string",
  "minLength": 5,
  "pattern": "^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)(?:-((?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\\+([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?$",
  "examples": [
    "1.0.0",
    "0.0.1",
    "1.2.3",
    "1.0.0-alpha",
    "1.0.0-beta.1",
    "2.0.0-rc.1",
    "1.0.0+build.123",
    "1.0.0-alpha+001"
  ],
  "x-specs": [
    {
      "id": "APP-VERSION-001",
      "given": "an app with name and simple SemVer version '1.0.0'",
      "when": "user navigates to the homepage",
      "then": "version badge should be visible with correct version text",
      "application": {
        "name": "my-app",
        "version": "1.0.0",
        "expectedDOM": "<div data-testid=\"version-badge\" data-slot=\"badge\">v1.0.0</div><h1 data-testid=\"app-name\">my-app</h1>",
        "semver": {
          "major": 1,
          "minor": 0,
          "patch": 0,
          "prerelease": null,
          "buildMetadata": null
        },
        "useCases": [
          "Release versioning: Track production releases",
          "User communication: Show current version to users",
          "Support: Identify user's app version for troubleshooting"
        ],
        "assertions": [
          "Version badge visible on homepage",
          "Badge text: 'v1.0.0' (v prefix + version)",
          "SemVer format: MAJOR.MINOR.PATCH",
          "data-testid: version-badge for testing"
        ]
      }
    },
    {
      "id": "APP-VERSION-002",
      "given": "an app with only name (no version property)",
      "when": "user navigates to the homepage",
      "then": "version badge should NOT be rendered",
      "application": {
        "name": "my-app",
        "version": null,
        "expectedDOM": "<h1 data-testid=\"app-name\">my-app</h1><!-- No version badge -->",
        "behavior": "Version badge only rendered if version property exists",
        "useCases": [
          "MVP apps: No version tracking during initial development",
          "Internal tools: Version not relevant for internal use",
          "Conditional rendering: Badge appears only when configured"
        ],
        "assertions": [
          "No version property → no badge rendered",
          "Badge element not in DOM",
          "Only app name displayed",
          "Graceful degradation: app works without version"
        ]
      }
    },
    {
      "id": "APP-VERSION-003",
      "given": "an app with pre-release version '2.0.0-beta.1'",
      "when": "user navigates to the homepage",
      "then": "badge should display pre-release version exactly as specified",
      "application": {
        "name": "beta-app",
        "version": "2.0.0-beta.1",
        "expectedDOM": "<div data-testid=\"version-badge\" data-slot=\"badge\">v2.0.0-beta.1</div>",
        "semver": {
          "major": 2,
          "minor": 0,
          "patch": 0,
          "prerelease": "beta.1",
          "precedence": "2.0.0-alpha < 2.0.0-beta < 2.0.0-beta.1 < 2.0.0"
        },
        "useCases": [
          "Beta testing: Identify pre-release versions",
          "Canary deployments: beta.1, beta.2, etc.",
          "Version precedence: 2.0.0-beta.1 < 2.0.0 (stable)"
        ],
        "assertions": [
          "Pre-release: 2.0.0-beta.1 (hyphen separator)",
          "Badge displays complete version with pre-release",
          "SemVer precedence: pre-release < stable",
          "Common identifiers: alpha, beta, rc (release candidate)"
        ]
      }
    },
    {
      "id": "APP-VERSION-004",
      "given": "an app with build metadata in version '1.0.0+build.123'",
      "when": "user navigates to the homepage",
      "then": "badge should display version with build metadata intact",
      "application": {
        "name": "build-app",
        "version": "1.0.0+build.123",
        "expectedDOM": "<div data-testid=\"version-badge\" data-slot=\"badge\">v1.0.0+build.123</div>",
        "semver": {
          "major": 1,
          "minor": 0,
          "patch": 0,
          "buildMetadata": "build.123",
          "precedence": "1.0.0+build.123 = 1.0.0+build.456 (metadata ignored in precedence)"
        },
        "useCases": [
          "CI/CD: Track build numbers (Jenkins, GitHub Actions)",
          "Git commits: +sha.abc123 (commit hash in metadata)",
          "Timestamp: +20250103.120000 (build timestamp)"
        ],
        "assertions": [
          "Build metadata: 1.0.0+build.123 (plus separator)",
          "Badge displays complete version with metadata",
          "Metadata ignored in version precedence",
          "Common uses: build numbers, commit hashes, timestamps"
        ]
      }
    },
    {
      "id": "APP-VERSION-005",
      "given": "an app with both pre-release and build metadata '1.0.0-alpha+001'",
      "when": "user navigates to the homepage",
      "then": "badge should display complete version string",
      "application": {
        "name": "full-version-app",
        "version": "1.0.0-alpha+001",
        "expectedDOM": "<div data-testid=\"version-badge\" data-slot=\"badge\">v1.0.0-alpha+001</div>",
        "semver": {
          "major": 1,
          "minor": 0,
          "patch": 0,
          "prerelease": "alpha",
          "buildMetadata": "001",
          "format": "MAJOR.MINOR.PATCH-PRERELEASE+BUILDMETADATA"
        },
        "useCases": [
          "Alpha builds: 1.0.0-alpha+001, 1.0.0-alpha+002",
          "Nightly builds: 1.0.0-nightly+20250103",
          "Complete traceability: version + build info"
        ],
        "assertions": [
          "Complete SemVer: 1.0.0-alpha+001",
          "Pre-release: alpha (affects precedence)",
          "Build metadata: 001 (informational only)",
          "Badge displays full version string"
        ]
      }
    },
    {
      "id": "APP-VERSION-006",
      "given": "an app with name and version",
      "when": "user navigates to the homepage",
      "then": "badge should appear before (above) the app name heading",
      "application": {
        "name": "ordered-app",
        "version": "1.2.3",
        "expectedDOM": "<div data-testid=\"version-badge\" data-slot=\"badge\">v1.2.3</div>\n<h1 data-testid=\"app-name\">ordered-app</h1>",
        "layout": {
          "order": "Version badge → App name heading",
          "positioning": "Badge above h1 in DOM order",
          "styling": "Badge smaller, subtle; h1 large, prominent"
        },
        "useCases": [
          "Visual hierarchy: Badge supports main heading",
          "Information architecture: Version context for app name",
          "Design pattern: Metadata above main content"
        ],
        "assertions": [
          "Badge rendered before h1 in DOM",
          "Visual order: badge above app name",
          "DOM structure: div (badge) → h1 (name)",
          "Hierarchy: badge = metadata, h1 = primary content"
        ]
      }
    },
    {
      "id": "APP-VERSION-007",
      "given": "an app with version",
      "when": "user navigates to the homepage",
      "then": "badge should have proper accessibility attributes (data-testid, data-slot)",
      "application": {
        "name": "accessible-app",
        "version": "3.0.0",
        "expectedDOM": "<div data-testid=\"version-badge\" data-slot=\"badge\" role=\"status\" aria-label=\"Application version 3.0.0\">v3.0.0</div>",
        "accessibility": {
          "dataTestid": "version-badge (testing)",
          "dataSlot": "badge (design system slot)",
          "role": "status (ARIA role for dynamic info)",
          "ariaLabel": "Application version 3.0.0 (screen reader)"
        },
        "useCases": [
          "Testing: data-testid for E2E tests",
          "Design system: data-slot for styling",
          "Accessibility: ARIA attributes for screen readers"
        ],
        "assertions": [
          "data-testid: version-badge (testing)",
          "data-slot: badge (design system)",
          "role: status (ARIA - dynamic content)",
          "aria-label: Descriptive label for screen readers"
        ]
      }
    },
    {
      "id": "APP-VERSION-REGRESSION-001",
      "given": "complete application configuration with all features",
      "when": "user completes full workflow",
      "then": "user can view version badge with all SemVer variations"
    }
  ]
}
