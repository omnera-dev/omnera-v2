{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Search Pages",
  "description": "Searches for pages in Notion",
  "type": "object",
  "properties": {
    "name": {
      "type": "string",
      "x-user-stories": [
        "GIVEN user provides name WHEN validating input THEN string value should be accepted",
        "GIVEN name is empty string WHEN validating input THEN behavior should follow optional/required rules"
      ]
    },
    "account": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "string"
        }
      ],
      "x-user-stories": [
        "GIVEN user configures account WHEN validating input THEN value should meet schema requirements",
        "GIVEN account is set WHEN processing configuration THEN value should be used correctly"
      ]
    },
    "service": {
      "type": "string",
      "const": "notion",
      "x-business-rules": [
        "Fixed value (notion) identifies this specific root.definitions.automation_action.anyOf.4.anyOf.6.anyOf.5.properties.service type in discriminated unions and routing logic"
      ],
      "x-user-stories": [
        "GIVEN entity with service='notion' WHEN processing configuration THEN correct handler should be selected",
        "GIVEN invalid service value WHEN validating configuration THEN clear error message should identify the issue"
      ]
    },
    "action": {
      "type": "string",
      "const": "search-pages",
      "x-business-rules": [
        "Fixed value (search-pages) identifies this specific root.definitions.automation_action.anyOf.4.anyOf.6.anyOf.5.properties.action type in discriminated unions and routing logic"
      ],
      "x-user-stories": [
        "GIVEN entity with action='search-pages' WHEN processing configuration THEN correct handler should be selected",
        "GIVEN invalid action value WHEN validating configuration THEN clear error message should identify the issue"
      ]
    },
    "params": {
      "type": "object",
      "properties": {
        "query": {
          "description": "Search query text",
          "type": "string",
          "x-user-stories": [
            "GIVEN user provides query WHEN validating input THEN string value should be accepted",
            "GIVEN query is empty string WHEN validating input THEN behavior should follow optional/required rules"
          ]
        },
        "filter": {
          "description": "Optional filter for search results",
          "type": "object",
          "properties": {
            "property": {
              "type": "string",
              "x-user-stories": [
                "GIVEN automation with filter condition WHEN condition evaluates to true THEN subsequent actions should execute",
                "GIVEN automation with filter condition WHEN condition evaluates to false THEN subsequent actions should be skipped",
                "GIVEN filter uses template variables WHEN evaluating condition THEN variables should resolve from trigger context"
              ]
            },
            "value": {
              "type": "string",
              "x-user-stories": [
                "GIVEN automation with filter condition WHEN condition evaluates to true THEN subsequent actions should execute",
                "GIVEN automation with filter condition WHEN condition evaluates to false THEN subsequent actions should be skipped",
                "GIVEN filter uses template variables WHEN evaluating condition THEN variables should resolve from trigger context"
              ]
            }
          },
          "additionalProperties": false,
          "x-business-rules": [
            "Object structure groups related filter properties for better organization and type-safe access"
          ],
          "x-user-stories": [
            "GIVEN user configures filter WHEN validating input THEN value should meet schema requirements",
            "GIVEN filter is set WHEN processing configuration THEN value should be used correctly"
          ]
        }
      },
      "required": ["query"],
      "additionalProperties": false,
      "x-business-rules": [
        "Object structure groups related params properties for better organization and type-safe access"
      ],
      "x-user-stories": [
        "GIVEN user configures params WHEN validating input THEN value should meet schema requirements",
        "GIVEN params is set WHEN processing configuration THEN value should be used correctly"
      ]
    }
  },
  "required": ["name", "account", "service", "action", "params"],
  "additionalProperties": false,
  "x-business-rules": [
    "Object structure groups related search pages properties for better organization and type-safe access"
  ]
}
