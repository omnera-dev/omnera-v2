{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "List Webhook Subscriptions",
  "description": "Lists the webhook subscriptions for a given organization",
  "type": "object",
  "properties": {
    "name": {
      "type": "string",
      "x-user-stories": [
        "GIVEN user provides name WHEN validating input THEN string value should be accepted",
        "GIVEN name is empty string WHEN validating input THEN behavior should follow optional/required rules"
      ]
    },
    "account": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "string"
        }
      ],
      "x-user-stories": [
        "GIVEN user configures account WHEN validating input THEN value should meet schema requirements",
        "GIVEN account is set WHEN processing configuration THEN value should be used correctly"
      ]
    },
    "service": {
      "type": "string",
      "const": "calendly",
      "x-business-rules": [
        "Fixed value (calendly) identifies this specific root.definitions.automation_action.anyOf.4.anyOf.0.anyOf.0.properties.service type in discriminated unions and routing logic"
      ],
      "x-user-stories": [
        "GIVEN entity with service='calendly' WHEN processing configuration THEN correct handler should be selected",
        "GIVEN invalid service value WHEN validating configuration THEN clear error message should identify the issue"
      ]
    },
    "action": {
      "type": "string",
      "const": "list-webhook-subscriptions",
      "x-business-rules": [
        "Fixed value (list-webhook-subscriptions) identifies this specific root.definitions.automation_action.anyOf.4.anyOf.0.anyOf.0.properties.action type in discriminated unions and routing logic"
      ],
      "x-user-stories": [
        "GIVEN entity with action='list-webhook-subscriptions' WHEN processing configuration THEN correct handler should be selected",
        "GIVEN invalid action value WHEN validating configuration THEN clear error message should identify the issue"
      ]
    },
    "params": {
      "type": "object",
      "properties": {
        "organization": {
          "default": "Current user organisation",
          "type": "string",
          "x-business-rules": [
            "Defaults to \"Current user organisation\" when not specified, providing sensible fallback behavior without requiring explicit configuration"
          ],
          "x-user-stories": [
            "GIVEN user provides organization WHEN validating input THEN string value should be accepted",
            "GIVEN organization is empty string WHEN validating input THEN behavior should follow optional/required rules"
          ]
        },
        "scope": {
          "default": "user",
          "type": "string",
          "enum": ["user", "organization", "group"],
          "x-business-rules": [
            "Restricted to 3 allowed values (user, organization, group) to maintain type safety and enable clear validation error messages",
            "Defaults to \"user\" when not specified, providing sensible fallback behavior without requiring explicit configuration"
          ],
          "x-user-stories": [
            "GIVEN user selects scope from valid options WHEN validating input THEN selection should be accepted",
            "GIVEN user provides invalid scope value WHEN validating input THEN error should list valid options: user, organization, group",
            "GIVEN scope is set to any valid enum value WHEN processing entity THEN appropriate behavior should execute"
          ]
        },
        "count": {
          "default": 20,
          "type": "number",
          "minimum": 1,
          "maximum": 100,
          "x-business-rules": [
            "Numeric range (1-100) prevents overflow errors and ensures values stay within valid business bounds",
            "Defaults to 20 when not specified, providing sensible fallback behavior without requiring explicit configuration"
          ],
          "x-user-stories": [
            "GIVEN user provides count between 1 and 100 WHEN validating input THEN value should be accepted",
            "GIVEN user provides count below 1 WHEN validating input THEN error should enforce minimum value",
            "GIVEN user provides count above 100 WHEN validating input THEN error should enforce maximum value"
          ]
        }
      },
      "additionalProperties": false,
      "x-business-rules": [
        "Object structure groups related params properties for better organization and type-safe access"
      ],
      "x-user-stories": [
        "GIVEN user configures params WHEN validating input THEN value should meet schema requirements",
        "GIVEN params is set WHEN processing configuration THEN value should be used correctly"
      ]
    }
  },
  "required": ["name", "account", "service", "action"],
  "additionalProperties": false,
  "x-business-rules": [
    "Object structure groups related list webhook subscriptions properties for better organization and type-safe access"
  ]
}
