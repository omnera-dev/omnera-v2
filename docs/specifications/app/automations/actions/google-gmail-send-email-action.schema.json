{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Send Email",
  "description": "Sends an email",
  "type": "object",
  "properties": {
    "name": {
      "type": "string",
      "x-user-stories": [
        "GIVEN user provides name WHEN validating input THEN string value should be accepted",
        "GIVEN name is empty string WHEN validating input THEN behavior should follow optional/required rules"
      ]
    },
    "account": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "string"
        }
      ],
      "x-user-stories": [
        "GIVEN user configures account WHEN validating input THEN value should meet schema requirements",
        "GIVEN account is set WHEN processing configuration THEN value should be used correctly"
      ]
    },
    "service": {
      "type": "string",
      "const": "google-gmail",
      "x-business-rules": [
        "Fixed value (google-gmail) identifies this specific root.definitions.automation_action.anyOf.4.anyOf.3.anyOf.0.properties.service type in discriminated unions and routing logic"
      ],
      "x-user-stories": [
        "GIVEN entity with service='google-gmail' WHEN processing configuration THEN correct handler should be selected",
        "GIVEN invalid service value WHEN validating configuration THEN clear error message should identify the issue"
      ]
    },
    "action": {
      "type": "string",
      "const": "send-email",
      "x-business-rules": [
        "Fixed value (send-email) identifies this specific root.definitions.automation_action.anyOf.4.anyOf.3.anyOf.0.properties.action type in discriminated unions and routing logic"
      ],
      "x-user-stories": [
        "GIVEN entity with action='send-email' WHEN processing configuration THEN correct handler should be selected",
        "GIVEN invalid action value WHEN validating configuration THEN clear error message should identify the issue"
      ]
    },
    "params": {
      "type": "object",
      "properties": {
        "from": {
          "type": "string",
          "x-user-stories": [
            "GIVEN user provides from WHEN validating input THEN string value should be accepted",
            "GIVEN from is empty string WHEN validating input THEN behavior should follow optional/required rules"
          ]
        },
        "name": {
          "type": "string",
          "x-user-stories": [
            "GIVEN user provides name WHEN validating input THEN string value should be accepted",
            "GIVEN name is empty string WHEN validating input THEN behavior should follow optional/required rules"
          ]
        },
        "to": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "array",
              "items": {
                "type": "string"
              },
              "x-business-rules": [
                "Array enables multiple 1 to be configured, supporting flexible workflows and batch operations"
              ]
            }
          ],
          "x-user-stories": [
            "GIVEN user configures to WHEN validating input THEN value should meet schema requirements",
            "GIVEN to is set WHEN processing configuration THEN value should be used correctly"
          ]
        },
        "cc": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "array",
              "items": {
                "type": "string"
              },
              "x-business-rules": [
                "Array enables multiple 1 to be configured, supporting flexible workflows and batch operations"
              ]
            }
          ],
          "x-user-stories": [
            "GIVEN user configures cc WHEN validating input THEN value should meet schema requirements",
            "GIVEN cc is set WHEN processing configuration THEN value should be used correctly"
          ]
        },
        "bcc": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "array",
              "items": {
                "type": "string"
              },
              "x-business-rules": [
                "Array enables multiple 1 to be configured, supporting flexible workflows and batch operations"
              ]
            }
          ],
          "x-user-stories": [
            "GIVEN user configures bcc WHEN validating input THEN value should meet schema requirements",
            "GIVEN bcc is set WHEN processing configuration THEN value should be used correctly"
          ]
        },
        "subject": {
          "type": "string",
          "x-user-stories": [
            "GIVEN user provides subject WHEN validating input THEN string value should be accepted",
            "GIVEN subject is empty string WHEN validating input THEN behavior should follow optional/required rules"
          ]
        },
        "html": {
          "type": "string",
          "x-user-stories": [
            "GIVEN user provides html WHEN validating input THEN string value should be accepted",
            "GIVEN html is empty string WHEN validating input THEN behavior should follow optional/required rules"
          ]
        },
        "text": {
          "type": "string",
          "x-user-stories": [
            "GIVEN user provides text WHEN validating input THEN string value should be accepted",
            "GIVEN text is empty string WHEN validating input THEN behavior should follow optional/required rules"
          ]
        }
      },
      "required": ["to", "subject", "html"],
      "additionalProperties": false,
      "x-business-rules": [
        "Object structure groups related params properties for better organization and type-safe access"
      ],
      "x-user-stories": [
        "GIVEN user configures params WHEN validating input THEN value should meet schema requirements",
        "GIVEN params is set WHEN processing configuration THEN value should be used correctly"
      ]
    }
  },
  "required": ["name", "account", "service", "action", "params"],
  "additionalProperties": false,
  "x-business-rules": [
    "Object structure groups related send email properties for better organization and type-safe access"
  ]
}
