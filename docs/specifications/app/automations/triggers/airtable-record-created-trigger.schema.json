{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Record Created",
  "description": "Triggered when an Airtable record is created",
  "type": "object",
  "properties": {
    "account": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "string"
        }
      ],
      "x-user-stories": [
        "GIVEN user configures account WHEN validating input THEN value should meet schema requirements",
        "GIVEN account is set WHEN processing configuration THEN value should be used correctly"
      ]
    },
    "service": {
      "type": "string",
      "const": "airtable",
      "x-business-rules": [
        "Fixed value (airtable) identifies this specific root.definitions.automation_trigger.anyOf.3.anyOf.1.anyOf.0.properties.service type in discriminated unions and routing logic"
      ],
      "x-user-stories": [
        "GIVEN entity with service='airtable' WHEN processing configuration THEN correct handler should be selected",
        "GIVEN invalid service value WHEN validating configuration THEN clear error message should identify the issue"
      ]
    },
    "event": {
      "type": "string",
      "const": "record-created",
      "x-business-rules": [
        "Fixed value (record-created) identifies this specific root.definitions.automation_trigger.anyOf.3.anyOf.1.anyOf.0.properties.event type in discriminated unions and routing logic"
      ],
      "x-user-stories": [
        "GIVEN entity with event='record-created' WHEN processing configuration THEN correct handler should be selected",
        "GIVEN invalid event value WHEN validating configuration THEN clear error message should identify the issue"
      ]
    },
    "params": {
      "type": "object",
      "properties": {
        "baseId": {
          "type": "string",
          "x-business-rules": [
            "Must be a valid Airtable base ID (format: 'appXXXXXXXXXXXXXX')",
            "Base must be accessible by the connected Airtable account",
            "Identifies which Airtable workspace/base to monitor for new records"
          ],
          "x-user-stories": [
            "GIVEN user provides baseId WHEN validating input THEN string value should be accepted",
            "GIVEN baseId is empty string WHEN validating input THEN behavior should follow optional/required rules"
          ]
        },
        "tableId": {
          "type": "string",
          "x-business-rules": [
            "Must be a valid Airtable table ID within the specified base",
            "Table must exist and be accessible by the connected account",
            "Triggers fire only for records created in this specific table, not other tables in the base"
          ],
          "x-user-stories": [
            "GIVEN user provides tableId WHEN validating input THEN string value should be accepted",
            "GIVEN tableId is empty string WHEN validating input THEN behavior should follow optional/required rules"
          ]
        }
      },
      "required": ["baseId", "tableId"],
      "additionalProperties": false,
      "x-business-rules": [
        "Object structure groups related params properties for better organization and type-safe access"
      ],
      "x-user-stories": [
        "GIVEN user configures params WHEN validating input THEN value should meet schema requirements",
        "GIVEN params is set WHEN processing configuration THEN value should be used correctly"
      ]
    }
  },
  "required": ["account", "service", "event", "params"],
  "additionalProperties": false,
  "x-business-rules": [
    "Object structure groups related record created properties for better organization and type-safe access"
  ]
}
