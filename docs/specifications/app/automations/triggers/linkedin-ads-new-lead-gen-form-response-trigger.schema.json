{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "New Lead Gen Form Response",
  "description": "Triggered when a new LinkedIn Lead Gen Form response is created",
  "type": "object",
  "properties": {
    "account": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "string"
        }
      ],
      "x-user-stories": [
        "GIVEN user configures account WHEN validating input THEN value should meet schema requirements",
        "GIVEN account is set WHEN processing configuration THEN value should be used correctly"
      ]
    },
    "service": {
      "type": "string",
      "const": "linkedin-ads",
      "x-business-rules": [
        "Fixed value (linkedin-ads) identifies this specific root.definitions.automation_trigger.anyOf.3.anyOf.2.anyOf.0.properties.service type in discriminated unions and routing logic"
      ],
      "x-user-stories": [
        "GIVEN entity with service='linkedin-ads' WHEN processing configuration THEN correct handler should be selected",
        "GIVEN invalid service value WHEN validating configuration THEN clear error message should identify the issue"
      ]
    },
    "event": {
      "type": "string",
      "const": "new-lead-gen-form-response",
      "x-business-rules": [
        "Fixed value (new-lead-gen-form-response) identifies this specific root.definitions.automation_trigger.anyOf.3.anyOf.2.anyOf.0.properties.event type in discriminated unions and routing logic"
      ],
      "x-user-stories": [
        "GIVEN entity with event='new-lead-gen-form-response' WHEN processing configuration THEN correct handler should be selected",
        "GIVEN invalid event value WHEN validating configuration THEN clear error message should identify the issue"
      ]
    },
    "params": {
      "type": "object",
      "properties": {
        "organizationId": {
          "title": "LinkedIn Organization ID",
          "description": "Required for non-sponsored lead forms",
          "type": "string",
          "x-business-rules": ["Required for non-sponsored lead forms"],
          "x-user-stories": [
            "GIVEN a new entity is created WHEN the system assigns an ID THEN it should be unique within the parent collection",
            "GIVEN an entity exists WHEN attempting to modify its ID THEN the system should prevent changes (read-only constraint)",
            "GIVEN a client requests an entity by ID WHEN the ID is valid THEN the entity should be retrieved successfully"
          ]
        },
        "sponsoredAccountId": {
          "title": "LinkedIn Sponsored Account ID",
          "description": "Required for sponsored lead forms (leadType: SPONSORED)",
          "type": "string",
          "x-business-rules": ["Required for sponsored lead forms (leadType: SPONSORED)"],
          "x-user-stories": [
            "GIVEN a new entity is created WHEN the system assigns an ID THEN it should be unique within the parent collection",
            "GIVEN an entity exists WHEN attempting to modify its ID THEN the system should prevent changes (read-only constraint)",
            "GIVEN a client requests an entity by ID WHEN the ID is valid THEN the entity should be retrieved successfully"
          ]
        },
        "leadType": {
          "default": "SPONSORED",
          "description": "Type of lead form. SPONSORED requires sponsoredAccountId",
          "type": "string",
          "enum": ["SPONSORED"],
          "x-business-rules": [
            "Restricted to 1 allowed values (SPONSORED) to maintain type safety and enable clear validation error messages",
            "Defaults to \"SPONSORED\" when not specified, providing sensible fallback behavior without requiring explicit configuration"
          ],
          "x-user-stories": [
            "GIVEN user selects leadType from valid options WHEN validating input THEN selection should be accepted",
            "GIVEN user provides invalid leadType value WHEN validating input THEN error should list valid options: SPONSORED",
            "GIVEN leadType is set to any valid enum value WHEN processing entity THEN appropriate behavior should execute"
          ]
        }
      },
      "additionalProperties": false,
      "x-business-rules": [
        "Object structure groups related params properties for better organization and type-safe access"
      ],
      "x-user-stories": [
        "GIVEN user configures params WHEN validating input THEN value should meet schema requirements",
        "GIVEN params is set WHEN processing configuration THEN value should be used correctly"
      ]
    }
  },
  "required": ["account", "service", "event", "params"],
  "additionalProperties": false,
  "x-user-stories": [
    "GIVEN the application is running WHEN I set up Facebook new lead trigger (subscribes page and app if needed) THEN it should work correctly"
  ],
  "x-business-rules": [
    "Object structure groups related new lead gen form response properties for better organization and type-safe access"
  ]
}
