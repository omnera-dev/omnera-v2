{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Invite Created",
  "description": "Triggered when a Calendly invite is created",
  "type": "object",
  "properties": {
    "account": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "string"
        }
      ],
      "x-business-rules": [
        "References the Calendly connection ID configured in the connections section",
        "Account must have valid OAuth credentials and webhook permissions",
        "Supports both numeric IDs and string identifiers for flexibility"
      ],
      "x-user-stories": [
        "GIVEN user configures account WHEN validating input THEN value should meet schema requirements",
        "GIVEN account is set WHEN processing configuration THEN value should be used correctly"
      ]
    },
    "service": {
      "type": "string",
      "const": "calendly",
      "x-business-rules": [
        "Fixed value (calendly) identifies this specific root.definitions.automation_trigger.anyOf.3.anyOf.0.anyOf.0.properties.service type in discriminated unions and routing logic"
      ],
      "x-user-stories": [
        "GIVEN entity with service='calendly' WHEN processing configuration THEN correct handler should be selected",
        "GIVEN invalid service value WHEN validating configuration THEN clear error message should identify the issue"
      ]
    },
    "event": {
      "type": "string",
      "const": "invite-created",
      "x-business-rules": [
        "Fixed value (invite-created) identifies this specific root.definitions.automation_trigger.anyOf.3.anyOf.0.anyOf.0.properties.event type in discriminated unions and routing logic"
      ],
      "x-user-stories": [
        "GIVEN entity with event='invite-created' WHEN processing configuration THEN correct handler should be selected",
        "GIVEN invalid event value WHEN validating configuration THEN clear error message should identify the issue"
      ]
    },
    "params": {
      "type": "object",
      "properties": {
        "organization": {
          "description": "The organization of the trigger",
          "default": "Current user organization",
          "type": "string",
          "x-business-rules": [
            "Defaults to the authenticated user's organization if not specified",
            "Filters webhook events to only invites within the specified organization",
            "Must match a valid Calendly organization UUID accessible by the connected account"
          ],
          "x-user-stories": [
            "GIVEN user provides organization WHEN validating input THEN string value should be accepted",
            "GIVEN organization is empty string WHEN validating input THEN behavior should follow optional/required rules"
          ]
        },
        "scope": {
          "description": "The scope of the trigger",
          "default": "user",
          "type": "string",
          "enum": ["user", "organization", "group"],
          "x-business-rules": [
            "User scope: triggers only for invites created by the authenticated user",
            "Organization scope: triggers for all invites within the organization (requires org-level permissions)",
            "Group scope: triggers for invites created by members of a specific group",
            "Broader scopes require higher permission levels in the Calendly connection"
          ],
          "x-user-stories": [
            "GIVEN user selects scope from valid options WHEN validating input THEN selection should be accepted",
            "GIVEN user provides invalid scope value WHEN validating input THEN error should list valid options: user, organization, group",
            "GIVEN scope is set to any valid enum value WHEN processing entity THEN appropriate behavior should execute"
          ]
        }
      },
      "additionalProperties": false,
      "x-business-rules": [
        "Object structure groups related params properties for better organization and type-safe access"
      ],
      "x-user-stories": [
        "GIVEN user configures params WHEN validating input THEN value should meet schema requirements",
        "GIVEN params is set WHEN processing configuration THEN value should be used correctly"
      ]
    }
  },
  "required": ["account", "service", "event"],
  "additionalProperties": false,
  "x-business-rules": [
    "Object structure groups related invite created properties for better organization and type-safe access"
  ]
}
