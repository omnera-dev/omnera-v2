{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Cron Time",
  "description": "Triggered by a cron expression",
  "type": "object",
  "properties": {
    "service": {
      "type": "string",
      "const": "schedule",
      "x-business-rules": [
        "Fixed value (schedule) identifies this specific root.definitions.automation_trigger.anyOf.2.anyOf.0.properties.service type in discriminated unions and routing logic"
      ],
      "x-user-stories": [
        "GIVEN entity with service='schedule' WHEN processing configuration THEN correct handler should be selected",
        "GIVEN invalid service value WHEN validating configuration THEN clear error message should identify the issue"
      ]
    },
    "event": {
      "type": "string",
      "const": "cron-time",
      "x-business-rules": [
        "Fixed value (cron-time) identifies this specific root.definitions.automation_trigger.anyOf.2.anyOf.0.properties.event type in discriminated unions and routing logic"
      ],
      "x-user-stories": [
        "GIVEN entity with event='cron-time' WHEN processing configuration THEN correct handler should be selected",
        "GIVEN invalid event value WHEN validating configuration THEN clear error message should identify the issue"
      ]
    },
    "params": {
      "type": "object",
      "properties": {
        "expression": {
          "type": "string",
          "x-business-rules": [
            "Must be a valid cron expression (e.g., '0 9 * * 1' for every Monday at 9 AM)",
            "Supports standard cron syntax with minute, hour, day of month, month, and day of week fields",
            "Expression is evaluated in the specified timezone to ensure correct execution timing",
            "Minimum interval between executions should be at least 1 minute to prevent excessive resource usage"
          ],
          "x-user-stories": [
            "GIVEN template with variables WHEN action executes THEN variables should be substituted with trigger context data",
            "GIVEN invalid template syntax WHEN validating automation THEN error should identify syntax issues",
            "GIVEN template variables reference trigger data WHEN automation runs THEN correct values should be interpolated"
          ]
        },
        "timeZone": {
          "type": "string",
          "x-business-rules": [
            "Must be a valid IANA timezone identifier (e.g., 'America/New_York', 'Europe/Paris')",
            "Timezone ensures cron expressions execute at correct local times regardless of server location",
            "Handles daylight saving time transitions automatically based on timezone rules",
            "Critical for business workflows that must run at specific local times (e.g., daily reports at 9 AM local time)"
          ],
          "x-user-stories": [
            "GIVEN automation with timezone WHEN cron expression evaluates THEN execution should occur at correct local time",
            "GIVEN invalid timezone identifier WHEN validating configuration THEN error should list valid IANA timezones",
            "GIVEN timezone handles DST transitions WHEN schedule crosses DST boundary THEN execution should occur at correct wall-clock time"
          ]
        }
      },
      "required": ["expression", "timeZone"],
      "additionalProperties": false,
      "x-business-rules": [
        "Object structure groups related params properties for better organization and type-safe access"
      ],
      "x-user-stories": [
        "GIVEN user configures params WHEN validating input THEN value should meet schema requirements",
        "GIVEN params is set WHEN processing configuration THEN value should be used correctly"
      ]
    }
  },
  "required": ["service", "event", "params"],
  "additionalProperties": false,
  "x-user-stories": [
    "GIVEN I am working with a cron time WHEN I trigger the automation THEN it should complete successfully"
  ],
  "x-business-rules": [
    "Object structure groups related cron time properties for better organization and type-safe access"
  ]
}
