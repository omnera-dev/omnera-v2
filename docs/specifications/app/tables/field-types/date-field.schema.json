{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Date Field",
  "description": "Date and time field with three modes: date for calendar dates only, datetime for timestamp with date and time, time for clock time only. Supports custom display formats (YYYY-MM-DD, MM/DD/YYYY, DD-MM-YYYY), timezone specification for datetime fields (UTC, America/New_York, Europe/London), and optional time component for date fields. Useful for tracking events, deadlines, and temporal data.",
  "type": "object",
  "properties": {
    "id": {
      "$ref": "../../common/definitions.schema.json#/definitions/id",
      "x-user-stories": [
        "GIVEN a new entity is created WHEN the system assigns an ID THEN it should be unique within the parent collection",
        "GIVEN an entity exists WHEN attempting to modify its ID THEN the system should prevent changes (read-only constraint)",
        "GIVEN a client requests an entity by ID WHEN the ID is valid THEN the entity should be retrieved successfully"
      ]
    },
    "name": {
      "$ref": "../../common/definitions.schema.json#/definitions/name",
      "x-user-stories": [
        "GIVEN new field is created WHEN saving configuration THEN field name should follow database naming conventions",
        "GIVEN field with duplicate name WHEN validating table schema THEN error should prevent conflicts",
        "GIVEN field name is set WHEN querying data THEN field should be accessible by its name"
      ]
    },
    "required": {
      "type": "boolean",
      "default": false,
      "x-business-rules": [
        "Defaults to false when not specified, providing sensible fallback behavior without requiring explicit configuration"
      ],
      "x-user-stories": [
        "GIVEN required is true WHEN processing entity THEN corresponding behavior should be enforced",
        "GIVEN required is false (default: False) WHEN processing entity THEN corresponding behavior should not be enforced",
        "GIVEN configuration with required WHEN validating settings THEN boolean value should be accepted"
      ]
    },
    "unique": {
      "type": "boolean",
      "default": false,
      "description": "Whether this field must contain unique values across all rows",
      "x-business-rules": [
        "Uniqueness constraint prevents conflicts and ensures each unique can be unambiguously referenced",
        "Defaults to false when not specified, providing sensible fallback behavior without requiring explicit configuration"
      ],
      "x-user-stories": [
        "GIVEN unique is true WHEN processing entity THEN corresponding behavior should be enforced",
        "GIVEN unique is false (default: False) WHEN processing entity THEN corresponding behavior should not be enforced",
        "GIVEN configuration with unique WHEN validating settings THEN boolean value should be accepted"
      ]
    },
    "indexed": {
      "type": "boolean",
      "default": false,
      "description": "Whether to create a database index on this field for faster queries",
      "x-business-rules": [
        "Defaults to false when not specified, providing sensible fallback behavior without requiring explicit configuration"
      ],
      "x-user-stories": [
        "GIVEN indexed is true WHEN processing entity THEN corresponding behavior should be enforced",
        "GIVEN indexed is false (default: False) WHEN processing entity THEN corresponding behavior should not be enforced",
        "GIVEN configuration with indexed WHEN validating settings THEN boolean value should be accepted"
      ]
    },
    "type": {
      "type": "string",
      "enum": ["date", "datetime", "time"],
      "x-business-rules": [
        "Restricted to 3 allowed values (date, datetime, time) to maintain type safety and enable clear validation error messages"
      ],
      "x-user-stories": [
        "GIVEN user selects type from valid options WHEN validating input THEN selection should be accepted",
        "GIVEN user provides invalid type value WHEN validating input THEN error should list valid options: date, datetime, time",
        "GIVEN type is set to any valid enum value WHEN processing entity THEN appropriate behavior should execute"
      ]
    },
    "format": {
      "type": "string",
      "description": "Date format string",
      "default": "YYYY-MM-DD",
      "examples": ["YYYY-MM-DD", "MM/DD/YYYY", "DD-MM-YYYY"],
      "x-business-rules": [
        "Defaults to \"YYYY-MM-DD\" when not specified, providing sensible fallback behavior without requiring explicit configuration"
      ],
      "x-user-stories": [
        "GIVEN user provides format WHEN validating input THEN string value should be accepted",
        "GIVEN format is empty string WHEN validating input THEN behavior should follow optional/required rules"
      ]
    },
    "includeTime": {
      "type": "boolean",
      "description": "Include time component (for date type)",
      "default": false,
      "x-business-rules": [
        "Defaults to false when not specified, providing sensible fallback behavior without requiring explicit configuration"
      ],
      "x-user-stories": [
        "GIVEN includeTime is true WHEN processing entity THEN corresponding behavior should be enforced",
        "GIVEN includeTime is false (default: False) WHEN processing entity THEN corresponding behavior should not be enforced",
        "GIVEN configuration with includeTime WHEN validating settings THEN boolean value should be accepted"
      ]
    },
    "timezone": {
      "type": "string",
      "description": "Timezone for datetime fields",
      "default": "UTC",
      "examples": ["UTC", "America/New_York", "Europe/London"],
      "x-business-rules": [
        "Defaults to \"UTC\" when not specified, providing sensible fallback behavior without requiring explicit configuration",
        "Must be valid IANA timezone identifier to ensure scheduled operations execute at correct local times across DST transitions"
      ],
      "x-user-stories": [
        "GIVEN automation with timezone WHEN cron expression evaluates THEN execution should occur at correct local time",
        "GIVEN invalid timezone identifier WHEN validating configuration THEN error should list valid IANA timezones",
        "GIVEN timezone handles DST transitions WHEN schedule crosses DST boundary THEN execution should occur at correct wall-clock time"
      ]
    },
    "default": {
      "type": "string",
      "x-user-stories": [
        "GIVEN user provides default WHEN validating input THEN string value should be accepted",
        "GIVEN default is empty string WHEN validating input THEN behavior should follow optional/required rules"
      ]
    }
  },
  "required": ["id", "name", "type"],
  "additionalProperties": false,
  "x-business-rules": [
    "Object structure groups related date field properties for better organization and type-safe access"
  ]
}
