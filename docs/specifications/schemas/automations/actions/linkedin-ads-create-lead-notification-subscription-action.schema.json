{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Create Lead Notification Subscription",
  "description": "Creates a LinkedIn Lead Notification subscription at owner level",
  "type": "object",
  "properties": {
    "name": {
      "type": "string",
      "x-user-stories": [
        "GIVEN user provides name WHEN validating input THEN string value should be accepted",
        "GIVEN name is empty string WHEN validating input THEN behavior should follow optional/required rules"
      ]
    },
    "account": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "string"
        }
      ],
      "x-user-stories": [
        "GIVEN user configures account WHEN validating input THEN value should meet schema requirements",
        "GIVEN account is set WHEN processing configuration THEN value should be used correctly"
      ]
    },
    "service": {
      "type": "string",
      "const": "linkedin-ads",
      "x-business-rules": [
        "Fixed value (linkedin-ads) identifies this specific root.definitions.automation_action.anyOf.4.anyOf.4.anyOf.0.properties.service type in discriminated unions and routing logic"
      ],
      "x-user-stories": [
        "GIVEN entity with service='linkedin-ads' WHEN processing configuration THEN correct handler should be selected",
        "GIVEN invalid service value WHEN validating configuration THEN clear error message should identify the issue"
      ]
    },
    "action": {
      "type": "string",
      "const": "create-lead-notification-subscription",
      "x-business-rules": [
        "Fixed value (create-lead-notification-subscription) identifies this specific root.definitions.automation_action.anyOf.4.anyOf.4.anyOf.0.properties.action type in discriminated unions and routing logic"
      ],
      "x-user-stories": [
        "GIVEN entity with action='create-lead-notification-subscription' WHEN processing configuration THEN correct handler should be selected",
        "GIVEN invalid action value WHEN validating configuration THEN clear error message should identify the issue"
      ]
    },
    "params": {
      "type": "object",
      "properties": {
        "webhook": {
          "title": "Webhook URL",
          "type": "string",
          "format": "uri",
          "x-business-rules": [
            "Must be a valid URI to ensure external links function correctly without broken references"
          ],
          "x-user-stories": [
            "GIVEN user provides URL WHEN validating input THEN valid URLs should be accepted",
            "GIVEN user provides invalid URL WHEN validating input THEN clear error message should be displayed",
            "GIVEN URL is stored WHEN user accesses it THEN link should navigate to correct destination"
          ]
        },
        "organizationId": {
          "title": "LinkedIn Organization ID",
          "type": "string",
          "x-user-stories": [
            "GIVEN a new entity is created WHEN the system assigns an ID THEN it should be unique within the parent collection",
            "GIVEN an entity exists WHEN attempting to modify its ID THEN the system should prevent changes (read-only constraint)",
            "GIVEN a client requests an entity by ID WHEN the ID is valid THEN the entity should be retrieved successfully"
          ]
        },
        "leadType": {
          "default": "SPONSORED",
          "type": "string",
          "enum": ["SPONSORED"],
          "x-business-rules": [
            "Restricted to 1 allowed values (SPONSORED) to maintain type safety and enable clear validation error messages",
            "Defaults to \"SPONSORED\" when not specified, providing sensible fallback behavior without requiring explicit configuration"
          ],
          "x-user-stories": [
            "GIVEN user selects leadType from valid options WHEN validating input THEN selection should be accepted",
            "GIVEN user provides invalid leadType value WHEN validating input THEN error should list valid options: SPONSORED",
            "GIVEN leadType is set to any valid enum value WHEN processing entity THEN appropriate behavior should execute"
          ]
        }
      },
      "required": ["webhook", "organizationId"],
      "additionalProperties": false,
      "x-business-rules": [
        "Object structure groups related params properties for better organization and type-safe access"
      ],
      "x-user-stories": [
        "GIVEN user configures params WHEN validating input THEN value should meet schema requirements",
        "GIVEN params is set WHEN processing configuration THEN value should be used correctly"
      ]
    }
  },
  "required": ["name", "account", "service", "action", "params"],
  "additionalProperties": false,
  "x-business-rules": [
    "Object structure groups related create lead notification subscription properties for better organization and type-safe access"
  ]
}
