{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "GET Request",
  "description": "Triggered by a GET request",
  "type": "object",
  "properties": {
    "service": {
      "type": "string",
      "const": "http",
      "x-business-rules": [
        "Fixed value (http) identifies this specific root.definitions.automation_trigger.anyOf.0.anyOf.1.properties.service type in discriminated unions and routing logic"
      ],
      "x-user-stories": [
        "GIVEN entity with service='http' WHEN processing configuration THEN correct handler should be selected",
        "GIVEN invalid service value WHEN validating configuration THEN clear error message should identify the issue"
      ]
    },
    "event": {
      "type": "string",
      "const": "get",
      "x-business-rules": [
        "Fixed value (get) identifies this specific root.definitions.automation_trigger.anyOf.0.anyOf.1.properties.event type in discriminated unions and routing logic"
      ],
      "x-user-stories": [
        "GIVEN entity with event='get' WHEN processing configuration THEN correct handler should be selected",
        "GIVEN invalid event value WHEN validating configuration THEN clear error message should identify the issue"
      ]
    },
    "params": {
      "type": "object",
      "properties": {
        "path": {
          "type": "string",
          "x-business-rules": [
            "GET webhook paths are typically used for webhook verification by external services (Facebook, LinkedIn)",
            "Path must match the webhook URL configured in the external service's settings",
            "GET requests often include verification parameters (challenge tokens) that must be echoed back"
          ],
          "x-user-stories": [
            "GIVEN user provides path WHEN validating input THEN string value should be accepted",
            "GIVEN path is empty string WHEN validating input THEN behavior should follow optional/required rules"
          ]
        },
        "respondImmediately": {
          "default": false,
          "type": "boolean",
          "x-business-rules": [
            "For GET webhooks, immediate response is often required to complete verification handshakes",
            "Verification flows expect specific response formats (e.g., echoing challenge parameter)",
            "After verification, subsequent GET requests may trigger actual automation workflows"
          ],
          "x-user-stories": [
            "GIVEN respondImmediately is true WHEN processing entity THEN corresponding behavior should be enforced",
            "GIVEN respondImmediately is false (default: False) WHEN processing entity THEN corresponding behavior should not be enforced",
            "GIVEN configuration with respondImmediately WHEN validating settings THEN boolean value should be accepted"
          ]
        }
      },
      "required": ["path"],
      "additionalProperties": false,
      "x-business-rules": [
        "Object structure groups related params properties for better organization and type-safe access"
      ],
      "x-user-stories": [
        "GIVEN user configures params WHEN validating input THEN value should meet schema requirements",
        "GIVEN params is set WHEN processing configuration THEN value should be used correctly"
      ]
    }
  },
  "required": ["service", "event", "params"],
  "additionalProperties": false,
  "x-user-stories": [
    "GIVEN Facebook sends GET validation request WHEN I respond with hub.challenge THEN it should succeed",
    "GIVEN hub.mode is not subscribe WHEN I not respond with challenge THEN it should succeed",
    "GIVEN I am working with a get request WHEN I not found the automation THEN it should complete successfully",
    "GIVEN I am working with a wrong path WHEN I not found the automation THEN it should complete successfully",
    "GIVEN LinkedIn sends GET validation request WHEN I respond with correctly computed challengeResponse THEN it should succeed",
    "GIVEN I am working with correct HMAC computation WHEN I handle GET validation for HTTP trigger path THEN it should complete successfully"
  ],
  "x-business-rules": [
    "Object structure groups related get request properties for better organization and type-safe access"
  ]
}
